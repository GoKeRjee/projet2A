extends template

block title
  h1 Edit your site

block content
  if noSites
    p No sites available.
  else
    div.form
      form(action='/updateSite', method='POST')
        label(for="site") Site:
        select(name='site', id='site', onchange='updateSiteId()')
          each site in sites
            option(value=site._id) #{site.name}
        input(type='hidden', name='id', id='id', value=sites[0]._id)

        label(for="name") New Name:
        input(type='text', name='name', placeholder="Example: my new site!", onfocus="this.placeholder = ''", required)

        label(for="port") New Port:
        input(type='text', name='port', pattern='^([0-9]|[1-9][0-9]{1,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$',  placeholder="Example: 2030", onfocus="this.placeholder = ''", required)

        input(type='submit', value='Update Site')

        script.
          function updateSiteId() {
            const siteSelect = document.getElementById('site');
            const idInput = document.getElementById('id');
            idInput.value = siteSelect.value;
          }
